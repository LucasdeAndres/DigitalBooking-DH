{"ast":null,"code":"var _jsxFileName = \"/Users/lucas/Desktop/Coding/Digital_House/Bimestre_4/clonado_2/grupo-04/src/routes/Login.js\",\n  _s = $RefreshSig$();\n// Imports\n// Librarys\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Link, useNavigate } from \"react-router-dom\";\n// Components\nimport { Footer } from \"../components/Footer\";\nimport { Header } from \"../components/header/Header\";\nimport { userContext } from '../context/UserContext';\nimport { Spinner } from '../components/Spinner';\nimport baseUrl from '../jsons/users.json';\nimport { faCircleExclamation } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { GeneralInput } from '../components/forms/generalInput';\n// Styles\nimport '../components/forms/formsContainerStyles.css';\n\n// Component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [email, setEmail] = useState({\n    value: '',\n    valid: null\n  });\n  const [password, setPassword] = useState({\n    value: '',\n    valid: null\n  });\n  const [isFormValid, setIsFormValid] = useState(null);\n  const [msgError, setMsgError] = useState('');\n  const [isRedirect, setIsRedirect] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    userInfo,\n    loginUser,\n    logoutUser\n  } = useContext(userContext);\n  const navigate = useNavigate();\n  const regularExpressions = {\n    email: /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/,\n    password: /^.{7,25}$/ // 7 to 25 digits.\n  };\n\n  useEffect(() => {\n    if (userInfo !== null && userInfo !== void 0 && userInfo.redirect) {\n      setIsRedirect(true);\n      logoutUser();\n    }\n  }, [userInfo === null || userInfo === void 0 ? void 0 : userInfo.redirect, logoutUser]);\n  const handleSubmit = e => {\n    e.preventDefault();\n    setIsFormValid(true);\n    if (email.value === '') {\n      setEmail(prevState => {\n        return {\n          ...prevState,\n          valid: 'false'\n        };\n      });\n    }\n    if (password.value === '') {\n      setPassword(prevState => {\n        return {\n          ...prevState,\n          valid: 'false'\n        };\n      });\n    }\n    if (email.valid === 'true' && password.valid === 'true') {\n      const data = {\n        email: email.value,\n        password: password.value\n      };\n      setIsLoading(true);\n      fetch(\"http://localhost:8080/auth/user/signin\", {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(data => {\n        if (data.status === 401) {\n          setMsgError = false;\n        } else {\n          navigate(\"/\");\n        }\n        setIsLoading(false);\n        loginUser({\n          ...data,\n          redirect: false\n        });\n      }).catch(err => {\n        setIsLoading(false);\n        setIsFormValid(false);\n        setMsgError('Lamentablemente no ha podido iniciar sesión. Por favor intente más tarde');\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"containerForms formLogin\",\n      children: [isRedirect && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"msgLoginBookingError\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faCircleExclamation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Para realizar una reserva necesitas estar logueado\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"titleForm\",\n          children: \"Iniciar Sesi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(GeneralInput, {\n            state: email,\n            changeState: setEmail,\n            label: \"Correo electr\\xF3nico\",\n            type: \"email\",\n            id: \"email\",\n            name: \"email\",\n            error: \"Ingrese un correo electronico valido\",\n            regex: regularExpressions.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(GeneralInput, {\n            state: password,\n            changeState: setPassword,\n            label: \"Contrase\\xF1a\",\n            type: \"password\",\n            id: \"password\",\n            name: \"password\",\n            error: \"La contrase\\xF1a debe tener entre 7 y 25 caracteres\",\n            regex: regularExpressions.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), isFormValid === false && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"msgErrorInvalidForm\",\n            children: msgError ? msgError : 'Por favor vuelva a intentarlo, sus credenciales son inválidas.'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn2 submitButton\",\n            children: \"Ingresar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"linkContainer\",\n            children: [\"\\xBFA\\xFAn no ten\\xE9s cuenta?\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n              className: \"linkAction\",\n              to: \"/register\",\n              children: \"Registrate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n};\n\n// Exports\n_s(Login, \"jQSIXOwmniHpuBXTflll+DjMhSY=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport { Login };\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useContext","useEffect","useState","Link","useNavigate","Footer","Header","userContext","Spinner","baseUrl","faCircleExclamation","FontAwesomeIcon","GeneralInput","Login","email","setEmail","value","valid","password","setPassword","isFormValid","setIsFormValid","msgError","setMsgError","isRedirect","setIsRedirect","isLoading","setIsLoading","userInfo","loginUser","logoutUser","navigate","regularExpressions","redirect","handleSubmit","e","preventDefault","prevState","data","fetch","method","body","JSON","stringify","headers","then","res","json","status","catch","err"],"sources":["/Users/lucas/Desktop/Coding/Digital_House/Bimestre_4/clonado_2/grupo-04/src/routes/Login.js"],"sourcesContent":["// Imports\n    // Librarys\nimport React, { useContext, useEffect, useState } from 'react';\nimport {Link, useNavigate} from \"react-router-dom\";\n    // Components\nimport {Footer} from \"../components/Footer\";\nimport {Header} from \"../components/header/Header\";\nimport { userContext } from '../context/UserContext';\nimport { Spinner } from '../components/Spinner';\nimport baseUrl from '../jsons/users.json';\nimport { faCircleExclamation } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { GeneralInput } from '../components/forms/generalInput';\n// Styles\nimport '../components/forms/formsContainerStyles.css';\n\n// Component\nconst Login = () => {\n  const [email, setEmail] = useState({ value: '', valid: null });\n  const [password, setPassword] = useState({ value: '', valid: null });\n  const [isFormValid, setIsFormValid] = useState(null);\n  const [msgError, setMsgError] = useState('');\n  const [isRedirect, setIsRedirect] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const { userInfo, loginUser, logoutUser } = useContext(userContext);\n\n  const navigate = useNavigate();\n\n  const regularExpressions = {\n    email: /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/,\n    password: /^.{7,25}$/, // 7 to 25 digits.\n  };\n\n  useEffect(() => {\n    if (userInfo?.redirect) {\n      setIsRedirect(true);\n      logoutUser();\n    }\n  }, [userInfo?.redirect, logoutUser]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setIsFormValid(true);\n\n    if (email.value === '') {\n      setEmail((prevState) => {\n        return { ...prevState, valid: 'false' };\n      });\n    }\n    if (password.value === '') {\n      setPassword((prevState) => {\n        return { ...prevState, valid: 'false' };\n      });\n    }\n\n    if (email.valid === 'true' && password.valid === 'true') {\n      const data = {\n        email: email.value,\n        password: password.value,\n      };\n      setIsLoading(true);\n      fetch(\"http://localhost:8080/auth/user/signin\", {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          if(data.status === 401) {\n            setMsgError = false\n          }else{\n            navigate(\"/\");\n          }\n          setIsLoading(false);\n          loginUser({ ...data, redirect: false });\n        })\n        .catch((err) => {\n          setIsLoading(false);\n          setIsFormValid(false);\n          setMsgError(\n            'Lamentablemente no ha podido iniciar sesión. Por favor intente más tarde'\n          );\n        });\n    }\n  };\n\n    return (\n        <React.Fragment>\n            <Header />\n            <div className = \"containerForms formLogin\">\n                {isRedirect && (\n                    <div className = \"msgLoginBookingError\">\n                    <div>\n                        <FontAwesomeIcon icon={faCircleExclamation} />\n                    </div>\n                    <p>Para realizar una reserva necesitas estar logueado</p>\n                    </div>\n                )}\n                {isLoading ? (\n                    <Spinner />\n                ) : (\n                    <form className = \"form\" onSubmit={handleSubmit}>\n                    <h1 className = \"titleForm\" >Iniciar Sesión</h1>\n                    <div>\n                        <GeneralInput\n                        state={email}\n                        changeState={setEmail}\n                        label=\"Correo electrónico\"\n                        type=\"email\"\n                        id=\"email\"\n                        name=\"email\"\n                        error=\"Ingrese un correo electronico valido\"\n                        regex={regularExpressions.email}\n                        />\n                        <GeneralInput\n                        state={password}\n                        changeState={setPassword}\n                        label=\"Contraseña\"\n                        type=\"password\"\n                        id=\"password\"\n                        name=\"password\"\n                        error=\"La contraseña debe tener entre 7 y 25 caracteres\"\n                        regex={regularExpressions.password}\n                        />\n                        {isFormValid === false && (\n                        <p className = \"msgErrorInvalidForm\">\n                            {msgError\n                            ? msgError\n                            : 'Por favor vuelva a intentarlo, sus credenciales son inválidas.'}\n                        </p>\n                        )}\n\n                        <button type=\"submit\" className = \"btn btn2 submitButton\">\n                        Ingresar\n                        </button>\n                        <p className = \"linkContainer\">\n                        ¿Aún no tenés cuenta?{' '}\n                        <Link className = \"linkAction\" to=\"/register\">\n                            Registrate\n                        </Link>\n                        </p>\n                    </div>\n                    </form>\n                )}\n            </div>\n            <Footer />\n        </React.Fragment>\n    );\n}\n\n// Exports\nexport {Login};"],"mappings":";;AAAA;AACI;AACJ,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,SAAQC,IAAI,EAAEC,WAAW,QAAO,kBAAkB;AAC9C;AACJ,SAAQC,MAAM,QAAO,sBAAsB;AAC3C,SAAQC,MAAM,QAAO,6BAA6B;AAClD,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,OAAO,QAAQ,uBAAuB;AAC/C,OAAOC,OAAO,MAAM,qBAAqB;AACzC,SAASC,mBAAmB,QAAQ,mCAAmC;AACvE,SAASC,eAAe,QAAQ,gCAAgC;AAChE,SAASC,YAAY,QAAQ,kCAAkC;AAC/D;AACA,OAAO,8CAA8C;;AAErD;AAAA;AACA,MAAMC,KAAK,GAAG,MAAM;EAAA;EAClB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC;IAAEc,KAAK,EAAE,EAAE;IAAEC,KAAK,EAAE;EAAK,CAAC,CAAC;EAC9D,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAAC;IAAEc,KAAK,EAAE,EAAE;IAAEC,KAAK,EAAE;EAAK,CAAC,CAAC;EACpE,MAAM,CAACG,WAAW,EAAEC,cAAc,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACsB,UAAU,EAAEC,aAAa,CAAC,GAAGvB,QAAQ,EAAE;EAC9C,MAAM,CAACwB,SAAS,EAAEC,YAAY,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EAEjD,MAAM;IAAE0B,QAAQ;IAAEC,SAAS;IAAEC;EAAW,CAAC,GAAG9B,UAAU,CAACO,WAAW,CAAC;EAEnE,MAAMwB,QAAQ,GAAG3B,WAAW,EAAE;EAE9B,MAAM4B,kBAAkB,GAAG;IACzBlB,KAAK,EAAE,kDAAkD;IACzDI,QAAQ,EAAE,WAAW,CAAE;EACzB,CAAC;;EAEDjB,SAAS,CAAC,MAAM;IACd,IAAI2B,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEK,QAAQ,EAAE;MACtBR,aAAa,CAAC,IAAI,CAAC;MACnBK,UAAU,EAAE;IACd;EACF,CAAC,EAAE,CAACF,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEK,QAAQ,EAAEH,UAAU,CAAC,CAAC;EAEpC,MAAMI,YAAY,GAAIC,CAAC,IAAK;IAC1BA,CAAC,CAACC,cAAc,EAAE;IAClBf,cAAc,CAAC,IAAI,CAAC;IAEpB,IAAIP,KAAK,CAACE,KAAK,KAAK,EAAE,EAAE;MACtBD,QAAQ,CAAEsB,SAAS,IAAK;QACtB,OAAO;UAAE,GAAGA,SAAS;UAAEpB,KAAK,EAAE;QAAQ,CAAC;MACzC,CAAC,CAAC;IACJ;IACA,IAAIC,QAAQ,CAACF,KAAK,KAAK,EAAE,EAAE;MACzBG,WAAW,CAAEkB,SAAS,IAAK;QACzB,OAAO;UAAE,GAAGA,SAAS;UAAEpB,KAAK,EAAE;QAAQ,CAAC;MACzC,CAAC,CAAC;IACJ;IAEA,IAAIH,KAAK,CAACG,KAAK,KAAK,MAAM,IAAIC,QAAQ,CAACD,KAAK,KAAK,MAAM,EAAE;MACvD,MAAMqB,IAAI,GAAG;QACXxB,KAAK,EAAEA,KAAK,CAACE,KAAK;QAClBE,QAAQ,EAAEA,QAAQ,CAACF;MACrB,CAAC;MACDW,YAAY,CAAC,IAAI,CAAC;MAClBY,KAAK,CAAC,wCAAwC,EAAE;QAC9CC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC;QAC1BM,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CAAC,CAAC,CACCC,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,EAAE,CAAC,CACzBF,IAAI,CAAEP,IAAI,IAAK;QACd,IAAGA,IAAI,CAACU,MAAM,KAAK,GAAG,EAAE;UACtBzB,WAAW,GAAG,KAAK;QACrB,CAAC,MAAI;UACHQ,QAAQ,CAAC,GAAG,CAAC;QACf;QACAJ,YAAY,CAAC,KAAK,CAAC;QACnBE,SAAS,CAAC;UAAE,GAAGS,IAAI;UAAEL,QAAQ,EAAE;QAAM,CAAC,CAAC;MACzC,CAAC,CAAC,CACDgB,KAAK,CAAEC,GAAG,IAAK;QACdvB,YAAY,CAAC,KAAK,CAAC;QACnBN,cAAc,CAAC,KAAK,CAAC;QACrBE,WAAW,CACT,0EAA0E,CAC3E;MACH,CAAC,CAAC;IACN;EACF,CAAC;EAEC,oBACI,QAAC,KAAK,CAAC,QAAQ;IAAA,wBACX,QAAC,MAAM;MAAA;MAAA;MAAA;IAAA,QAAG,eACV;MAAK,SAAS,EAAG,0BAA0B;MAAA,WACtCC,UAAU,iBACP;QAAK,SAAS,EAAG,sBAAsB;QAAA,wBACvC;UAAA,uBACI,QAAC,eAAe;YAAC,IAAI,EAAEd;UAAoB;YAAA;YAAA;YAAA;UAAA;QAAG;UAAA;UAAA;UAAA;QAAA,QAC5C,eACN;UAAA,UAAG;QAAkD;UAAA;UAAA;UAAA;QAAA,QAAI;MAAA;QAAA;QAAA;QAAA;MAAA,QAE5D,EACAgB,SAAS,gBACN,QAAC,OAAO;QAAA;QAAA;QAAA;MAAA,QAAG,gBAEX;QAAM,SAAS,EAAG,MAAM;QAAC,QAAQ,EAAEQ,YAAa;QAAA,wBAChD;UAAI,SAAS,EAAG,WAAW;UAAA,UAAE;QAAc;UAAA;UAAA;UAAA;QAAA,QAAK,eAChD;UAAA,wBACI,QAAC,YAAY;YACb,KAAK,EAAEpB,KAAM;YACb,WAAW,EAAEC,QAAS;YACtB,KAAK,EAAC,uBAAoB;YAC1B,IAAI,EAAC,OAAO;YACZ,EAAE,EAAC,OAAO;YACV,IAAI,EAAC,OAAO;YACZ,KAAK,EAAC,sCAAsC;YAC5C,KAAK,EAAEiB,kBAAkB,CAAClB;UAAM;YAAA;YAAA;YAAA;UAAA,QAC9B,eACF,QAAC,YAAY;YACb,KAAK,EAAEI,QAAS;YAChB,WAAW,EAAEC,WAAY;YACzB,KAAK,EAAC,eAAY;YAClB,IAAI,EAAC,UAAU;YACf,EAAE,EAAC,UAAU;YACb,IAAI,EAAC,UAAU;YACf,KAAK,EAAC,qDAAkD;YACxD,KAAK,EAAEa,kBAAkB,CAACd;UAAS;YAAA;YAAA;YAAA;UAAA,QACjC,EACDE,WAAW,KAAK,KAAK,iBACtB;YAAG,SAAS,EAAG,qBAAqB;YAAA,UAC/BE,QAAQ,GACPA,QAAQ,GACR;UAAgE;YAAA;YAAA;YAAA;UAAA,QAErE,eAED;YAAQ,IAAI,EAAC,QAAQ;YAAC,SAAS,EAAG,uBAAuB;YAAA,UAAC;UAE1D;YAAA;YAAA;YAAA;UAAA,QAAS,eACT;YAAG,SAAS,EAAG,eAAe;YAAA,WAAC,gCACV,EAAC,GAAG,eACzB,QAAC,IAAI;cAAC,SAAS,EAAG,YAAY;cAAC,EAAE,EAAC,WAAW;cAAA,UAAC;YAE9C;cAAA;cAAA;cAAA;YAAA,QAAO;UAAA;YAAA;YAAA;YAAA;UAAA,QACH;QAAA;UAAA;UAAA;UAAA;QAAA,QACF;MAAA;QAAA;QAAA;QAAA;MAAA,QAET;IAAA;MAAA;MAAA;MAAA;IAAA,QACC,eACN,QAAC,MAAM;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA;IAAA;IAAA;IAAA;EAAA,QACG;AAEzB,CAAC;;AAED;AAAA,GAxIMT,KAAK;EAAA,QAUQT,WAAW;AAAA;AAAA,KAVxBS,KAAK;AAyIX,SAAQA,KAAK;AAAE;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}