{"ast":null,"code":"var _jsxFileName = \"/Users/lucas/Desktop/Coding/Digital_House/Bimestre_4/clonado_2/grupo-04/src/routes/Login.js\",\n  _s = $RefreshSig$();\n// Imports\n// Librarys\nimport React, { useContext, useState } from 'react';\nimport { Link, useNavigate } from \"react-router-dom\";\n// Components\nimport { Footer } from \"../components/Footer\";\nimport { Header } from \"../components/header/Header\";\nimport { userContext } from '../context/UserContext';\nimport { GeneralInput } from '../components/forms/generalInput';\n// Styles\nimport '../components/forms/formsContainerStyles.css';\n\n// Component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [email, setEmail] = useState({\n    value: '',\n    valid: null\n  });\n  const [password, setPassword] = useState({\n    value: '',\n    valid: null\n  });\n  const [isFormValid, setIsFormValid] = useState(null);\n  const [msgError, setMsgError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    loginUser\n  } = useContext(userContext);\n  const navigate = useNavigate();\n  const regularExpressions = {\n    email: /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/,\n    password: /^.{7,25}$/ // 7 to 25 digits.\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setIsFormValid(true);\n    if (email.value === '') {\n      setEmail(prevState => {\n        return {\n          ...prevState,\n          valid: 'false'\n        };\n      });\n    }\n    if (password.value === '') {\n      setPassword(prevState => {\n        return {\n          ...prevState,\n          valid: 'false'\n        };\n      });\n    }\n    if (email.valid === 'true' && password.valid === 'true') {\n      const data = {\n        email: email.value,\n        password: password.value\n      };\n      setIsLoading(true);\n      fetch(\"http://localhost:8080/auth/user/signin\", {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(data => {\n        if (data.status === 401) {\n          setMsgError = false;\n        } else {\n          navigate(\"/\");\n        }\n        setIsLoading(false);\n        loginUser({\n          ...data,\n          redirect: false\n        });\n      }).catch(err => {\n        setIsLoading(false);\n        setIsFormValid(false);\n        setMsgError('Lamentablemente no ha podido iniciar sesión. Por favor intente más tarde');\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"Login__section formLogin\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"section__form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"form__h1\",\n          children: \"Iniciar Sesi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(GeneralInput, {\n            state: email,\n            changeState: setEmail,\n            label: \"Correo electr\\xF3nico\",\n            type: \"email\",\n            id: \"email\",\n            name: \"email\",\n            error: \"Ingrese un correo electronico valido\",\n            regex: regularExpressions.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(GeneralInput, {\n            state: password,\n            changeState: setPassword,\n            label: \"Contrase\\xF1a\",\n            type: \"password\",\n            id: \"password\",\n            name: \"password\",\n            error: \"La contrase\\xF1a debe tener entre 7 y 25 caracteres\",\n            regex: regularExpressions.password\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 21\n          }, this), isFormValid === false && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"msgErrorInvalidForm\",\n            children: msgError ? msgError : 'Por favor vuelva a intentarlo, sus credenciales son inválidas.'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn2 submitButton\",\n          children: \"Ingresar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"div__span\",\n          children: [\"\\xBFA\\xFAn no ten\\xE9s cuenta?\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n            className: \"div__a\",\n            to: \"/register\",\n            children: \"Registrate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n};\n\n// Exports\n_s(Login, \"8UYgWWVjG8iClhaKi25ccZT8UP4=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport { Login };\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useContext","useState","Link","useNavigate","Footer","Header","userContext","GeneralInput","Login","email","setEmail","value","valid","password","setPassword","isFormValid","setIsFormValid","msgError","setMsgError","isLoading","setIsLoading","loginUser","navigate","regularExpressions","handleSubmit","e","preventDefault","prevState","data","fetch","method","body","JSON","stringify","headers","then","res","json","status","redirect","catch","err"],"sources":["/Users/lucas/Desktop/Coding/Digital_House/Bimestre_4/clonado_2/grupo-04/src/routes/Login.js"],"sourcesContent":["// Imports\n    // Librarys\nimport React, { useContext, useState } from 'react';\nimport {Link, useNavigate} from \"react-router-dom\";\n    // Components\nimport {Footer} from \"../components/Footer\";\nimport {Header} from \"../components/header/Header\";\nimport { userContext } from '../context/UserContext';\nimport { GeneralInput } from '../components/forms/generalInput';\n// Styles\nimport '../components/forms/formsContainerStyles.css';\n\n// Component\nconst Login = () => {\n  const [email, setEmail] = useState({ value: '', valid: null });\n  const [password, setPassword] = useState({ value: '', valid: null });\n  const [isFormValid, setIsFormValid] = useState(null);\n  const [msgError, setMsgError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const { loginUser } = useContext(userContext);\n\n  const navigate = useNavigate();\n\n  const regularExpressions = {\n    email: /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/,\n    password: /^.{7,25}$/, // 7 to 25 digits.\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setIsFormValid(true);\n\n    if (email.value === '') {\n      setEmail((prevState) => {\n        return { ...prevState, valid: 'false' };\n      });\n    }\n    if (password.value === '') {\n      setPassword((prevState) => {\n        return { ...prevState, valid: 'false' };\n      });\n    }\n\n    if (email.valid === 'true' && password.valid === 'true') {\n      const data = {\n        email: email.value,\n        password: password.value,\n      };\n      setIsLoading(true);\n      fetch(\"http://localhost:8080/auth/user/signin\", {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          if(data.status === 401) {\n            setMsgError = false\n          }else{\n            navigate(\"/\");\n          }\n          setIsLoading(false);\n          loginUser({ ...data, redirect: false });\n        })\n        .catch((err) => {\n          setIsLoading(false);\n          setIsFormValid(false);\n          setMsgError(\n            'Lamentablemente no ha podido iniciar sesión. Por favor intente más tarde'\n          );\n        });\n    }\n  };\n\n    return (\n        <React.Fragment>\n            <Header />\n            <section className = \"Login__section formLogin\">\n              <form className = \"section__form\" onSubmit={handleSubmit}>\n                <h1 className = \"form__h1\" >Iniciar Sesión</h1>\n                <div>\n                    <GeneralInput\n                    state={email}\n                    changeState={setEmail}\n                    label=\"Correo electrónico\"\n                    type=\"email\"\n                    id=\"email\"\n                    name=\"email\"\n                    error=\"Ingrese un correo electronico valido\"\n                    regex={regularExpressions.email}\n                    />\n                    <GeneralInput\n                    state={password}\n                    changeState={setPassword}\n                    label=\"Contraseña\"\n                    type=\"password\"\n                    id=\"password\"\n                    name=\"password\"\n                    error=\"La contraseña debe tener entre 7 y 25 caracteres\"\n                    regex={regularExpressions.password}\n                    />\n                    {isFormValid === false && (\n                    <p className = \"msgErrorInvalidForm\">\n                        {msgError\n                        ? msgError\n                        : 'Por favor vuelva a intentarlo, sus credenciales son inválidas.'}\n                    </p>\n                    )}\n                </div>\n                <button type=\"submit\" className = \"btn btn2 submitButton\">\n                Ingresar\n                </button>\n                <span className = \"div__span\">\n                ¿Aún no tenés cuenta?{' '}\n                <Link className = \"div__a\" to=\"/register\">\n                    Registrate\n                </Link>\n                </span>\n              </form>\n            </section>\n            <Footer />\n        </React.Fragment>\n    );\n}\n\n// Exports\nexport {Login};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}